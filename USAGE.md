# 使用指南

## 快速开始

### 1. 安装和配置

```bash
# 安装依赖
npm install

# 复制环境变量模板
cp .env.local.example .env.local

# 编辑 .env.local 并添加你的 OpenAI API Key
```

### 2. 启动开发服务器

```bash
npm run dev
```

访问 http://localhost:3000

## 功能详解

### 主要功能

#### 1. 填写旅行需求

在主页面左侧表单中填写以下信息：

**必填字段:**
- **目的地**: 你想去的城市或国家（例如：日本东京、法国巴黎）
- **出发日期**: 计划的出发日期
- **旅行天数**: 计划旅行的总天数（1-30天）
- **旅行人数**: 同行人数（包括自己）
- **预算**: 总预算，单位为人民币CNY
- **兴趣爱好**: 你的旅行偏好，用逗号分隔

**可选字段:**
- **特殊要求**: 任何特殊需求，如：
  - 饮食限制（素食、清真等）
  - 住宿偏好（高评分酒店、青旅等）
  - 无障碍设施需求
  - 其他特殊要求

#### 2. 生成AI旅行计划

点击"生成AI旅行计划"按钮后，系统会：

1. 验证输入信息
2. 发送请求到AI服务
3. 等待AI生成详细计划（通常需要10-30秒）
4. 在右侧显示生成的计划

#### 3. 查看和使用旅行计划

生成的旅行计划包含：

- **行程概览**: 旅行亮点和推荐理由
- **每日详细行程**: 
  - 上午、下午活动
  - 餐饮推荐
  - 住宿建议
  - 每日预算
- **实用信息**: 
  - 交通方式
  - 当地美食
  - 文化注意事项
  - 紧急联系方式
- **预算分解**: 详细的费用明细
- **贴心提示**: 省钱技巧和建议

#### 4. 导出和分享

- **下载计划**: 点击"下载计划"按钮，将计划保存为文本文件
- **分享**: 点击"分享"按钮：
  - 支持原生分享API（移动设备）
  - 自动复制到剪贴板（桌面设备）

## 使用技巧

### 获得更好的旅行计划

1. **详细描述兴趣**
   ```
   ✅ 好: "历史文化、博物馆、当地美食、徒步、摄影"
   ❌ 差: "旅游"
   ```

2. **明确特殊要求**
   ```
   ✅ 好: "需要家庭友好型酒店，有儿童设施；偏好中高档餐厅；希望包含主题公园"
   ❌ 差: "随便"
   ```

3. **合理设置预算**
   - 预算过低可能导致计划不切实际
   - 预算过高可能导致过度奢华的建议
   - 建议参考: 国内游 2000-5000元/人/周，国际游 5000-15000元/人/周

4. **考虑旅行天数**
   - 3-5天: 适合城市深度游
   - 7-10天: 可以覆盖多个城市
   - 10天以上: 适合国家/地区深度游

### 优化预算

如果生成的计划超出预算：

1. 在特殊要求中说明: "预算有限，请提供经济型住宿和餐饮"
2. 选择淡季出行
3. 减少旅行天数
4. 选择住宿和交通经济的目的地

### 使用场景示例

#### 场景1: 周末短途游

```
目的地: 苏州
出发日期: 2024-03-15
旅行天数: 3
旅行人数: 2
预算: 3000
兴趣爱好: 园林、古镇、美食
特殊要求: 希望安排一天游览周庄古镇
```

#### 场景2: 家庭度假

```
目的地: 三亚
出发日期: 2024-07-01
旅行天数: 7
旅行人数: 4 (2大人2小孩)
预算: 20000
兴趣爱好: 海滩、水上活动、亲子活动
特殊要求: 需要儿童友好酒店，包含儿童俱乐部；避免太辣的食物
```

#### 场景3: 文化深度游

```
目的地: 意大利罗马
出发日期: 2024-09-15
旅行天数: 10
旅行人数: 1
预算: 25000
兴趣爱好: 古罗马历史、文艺复兴艺术、博物馆、意大利美食
特殊要求: 需要预约主要博物馆；对历史讲解感兴趣；希望避开旅游高峰
```

## 常见问题

### Q: 为什么生成计划需要这么长时间？

A: AI需要分析你的需求并生成详细的个性化计划，通常需要10-30秒。如果超过1分钟，可能是：
- API服务繁忙
- 网络连接问题
- 请求超时

**解决方案**: 刷新页面重试

### Q: 生成的计划不符合我的预算怎么办？

A: 你可以：
1. 在特殊要求中明确说明预算限制
2. 调整预算金额
3. 重新生成计划

### Q: 可以保存多个旅行计划吗？

A: 当前版本支持下载计划到本地。未来版本将支持：
- 用户账户系统
- 历史计划保存
- 计划对比功能

### Q: 生成的日期和我填写的不一致？

A: AI会根据你的出发日期生成对应的行程。如果发现不一致，可以在使用时手动调整。

### Q: 可以修改生成的计划吗？

A: 当前版本不支持在线编辑。建议：
1. 下载计划后本地编辑
2. 如需大幅修改，调整需求后重新生成

### Q: 支持哪些语言？

A: 当前版本支持中文。AI可以理解中英文输入，但建议使用中文以获得最佳体验。

### Q: 计划中的价格准确吗？

A: AI提供的价格是估算值，可能因季节、汇率、具体情况而变化。建议：
- 作为参考预算使用
- 实际预订前核实价格
- 预留10-20%的缓冲预算

### Q: 如何处理错误？

A: 如果遇到错误：
1. 检查网络连接
2. 确认API密钥配置正确
3. 查看浏览器控制台错误信息
4. 刷新页面重试

## API使用说明

### 请求格式

```typescript
POST /api/plan

{
  "destination": "string",
  "duration": "string",
  "travelers": "string",
  "budget": "string",
  "interests": "string",
  "startDate": "string",
  "specialRequests": "string" // 可选
}
```

### 响应格式

```typescript
// 成功
{
  "plan": "string" // 生成的旅行计划文本
}

// 错误
{
  "error": "string" // 错误信息
}
```

### 错误码

- `400`: 请求参数不完整
- `500`: 服务器错误或API调用失败

## 性能优化

### 减少等待时间

1. **使用GPT-3.5**: 修改API配置使用更快的模型
   ```typescript
   model: 'gpt-3.5-turbo' // 代替 gpt-4-turbo-preview
   ```

2. **减少响应长度**: 调整max_tokens参数
   ```typescript
   max_tokens: 2000 // 代替 3000
   ```

### 降低成本

1. 使用GPT-3.5模型（成本降低90%）
2. 缓存常见目的地的计划
3. 实现请求限流

## 进阶使用

### 自定义AI提示词

在 `app/api/plan/route.ts` 中修改提示词以调整AI行为：

```typescript
const prompt = `你是一位专业的旅行规划师...`
```

### 集成其他服务

可以集成的第三方服务：
- **地图API**: Google Maps, 高德地图
- **天气API**: OpenWeatherMap
- **航班API**: Skyscanner API
- **酒店API**: Booking.com API

### 添加用户认证

建议使用：
- NextAuth.js
- Clerk
- Supabase Auth

## 反馈和支持

遇到问题或有建议？

- 📧 Email: your.email@example.com
- 🐛 Issues: [GitHub Issues](https://github.com/yourusername/AI-Travel-Planner/issues)
- 💬 Discussions: [GitHub Discussions](https://github.com/yourusername/AI-Travel-Planner/discussions)

---

祝你旅途愉快！ 🌍✈️

